{"ast":null,"code":"var _jsxFileName = \"/home/mdskrumi/Code/react-task-bs/unsplash-pics-new/src/components/App.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { useQuery, QueryCache, ReactQueryCacheProvider } from 'react-query';\nimport SearchBar from \"./SearchBar\";\nimport ImageList from \"./ImageList\";\nconst queryCache = new QueryCache();\n\nconst App = ({\n  setImage\n}) => {\n  const [images, setImages] = useState([]); // const [error_msg, setErrorMsg] = useState(\"\");\n\n  const [term, setTerm] = useState(\"\");\n\n  const onSearchSubmit = term => {\n    console.log(term);\n    setTerm(term);\n  };\n\n  const {\n    isLoading,\n    error,\n    data\n  } = useQuery(['Images', term], async (key, params = \"\", ...rest) => {\n    console.log(\"key :\" + key);\n    console.log(\"paras: \" + params);\n    console.log(...rest);\n    const queryString = params === \"\" ? \"https://api.unsplash.com/photos\" : `https://api.unsplash.com/search/photos/?query=${params}`;\n    console.log(queryString);\n    const response = await fetch(queryString, {\n      method: \"GET\",\n      headers: {\n        Authorization: \"Client-ID R4Q_V32stbrWOzb3DpOntSfstan64mljhm-QftIjSCY\"\n      }\n    });\n    return response.json();\n  });\n  useEffect(() => {\n    if (data && term === \"\") {\n      setImages(data);\n    } else if (data && data.results) {\n      setImages(data.results);\n    }\n\n    return () => {\n      queryCache.clear();\n    };\n  }, [isLoading, data, term]);\n  console.log(data);\n\n  if (error) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 12\n      }\n    }, 'An error has occurred: ' + error.message);\n  } else if (isLoading) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      class: \"ui container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"ui active dimmer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"ui indeterminate text loader\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }\n    }, \"Preparing Files\")), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }\n    }));\n  }\n\n  return /*#__PURE__*/React.createElement(ReactQueryCacheProvider, {\n    queryCache: queryCache,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ui container\",\n    style: {\n      marginTop: \"10px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(SearchBar, {\n    onSearchSubmit: onSearchSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(ImageList, {\n    images: images,\n    setImage: setImage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  })));\n};\n\nexport default App;","map":{"version":3,"sources":["/home/mdskrumi/Code/react-task-bs/unsplash-pics-new/src/components/App.js"],"names":["React","useState","useEffect","useQuery","QueryCache","ReactQueryCacheProvider","SearchBar","ImageList","queryCache","App","setImage","images","setImages","term","setTerm","onSearchSubmit","console","log","isLoading","error","data","key","params","rest","queryString","response","fetch","method","headers","Authorization","json","results","clear","message","marginTop"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useQuery, QueryCache, ReactQueryCacheProvider } from 'react-query';\n\n\n\nimport SearchBar from \"./SearchBar\";\nimport ImageList from \"./ImageList\";\n\n\nconst queryCache = new QueryCache();\n\n\nconst App = ({ setImage }) => {\n  const [images, setImages] = useState([]);\n  // const [error_msg, setErrorMsg] = useState(\"\");\n  const [term, setTerm] = useState(\"\");\n\n\n\n\n  const onSearchSubmit = (term) => {\n    console.log(term);\n    setTerm(term);\n  };\n\n\n\n\n\n  const { isLoading, error, data } = useQuery(['Images', term], async (key, params = \"\", ...rest) => {\n\n    console.log(\"key :\" + key);\n    console.log(\"paras: \" + params);\n    console.log(...rest);\n\n    const queryString = (params === \"\")\n      ? \"https://api.unsplash.com/photos\"\n      : `https://api.unsplash.com/search/photos/?query=${params}`;\n\n\n    console.log(queryString);\n\n    const response = await fetch(queryString, {\n      method: \"GET\",\n      headers: {\n        Authorization: \"Client-ID R4Q_V32stbrWOzb3DpOntSfstan64mljhm-QftIjSCY\",\n      },\n    });\n    return response.json();\n  }\n  );\n\n\n  useEffect(() => {\n    if (data && term === \"\") {\n      setImages(data);\n    } else if (data && data.results) {\n      setImages(data.results);\n    }\n    return () => {\n      queryCache.clear();\n    }\n  }, [isLoading, data, term])\n\n\n  console.log(data);\n\n\n  if (error) {\n    return <div>{'An error has occurred: ' + error.message}</div>\n  }\n  else if (isLoading) {\n    return (\n      <div class=\"ui container\">\n        <div class=\"ui active dimmer\">\n          <div class=\"ui indeterminate text loader\">Preparing Files</div>\n        </div>\n        <p></p>\n      </div>\n    )\n  }\n\n  return (\n    <ReactQueryCacheProvider queryCache={queryCache}>\n      <div className=\"ui container\" style={{ marginTop: \"10px\" }}>\n        <SearchBar onSearchSubmit={onSearchSubmit} />\n        <ImageList images={images} setImage={setImage} />\n      </div>\n    </ReactQueryCacheProvider>\n  )\n\n\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}